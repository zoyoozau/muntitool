<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Title will be set dynamically -->
    <title>Loading Tool...</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
        }
        iframe {
            border: none;
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <iframe id="tool-frame" title="Tool Content"></iframe>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const toolFrame = document.getElementById('tool-frame');
            const urlParams = new URLSearchParams(window.location.search);
            const toolPath = urlParams.get('path');

            if (toolPath) {
                // Set the iframe source to the tool's path
                toolFrame.src = toolPath;

                // Fetch the tool's metadata to set the page title
                fetch('tools.json')
                    .then(response => response.json())
                    .then(tools => {
                        const tool = tools.find(t => t.path === toolPath);
                        if (tool) {
                            document.title = tool.name + ' - Muntitool';
                        } else {
                            document.title = 'Unknown Tool - Muntitool';
                        }
                    })
                    .catch(error => {
                        console.error('Error fetching tools.json:', error);
                        document.title = 'Error Loading Tool - Muntitool';
                    });
            } else {
                // Handle case where no tool path is provided
                document.body.innerHTML = '<p style="font-family: sans-serif; text-align: center; padding: 2rem;">No tool specified. Please return to the homepage and select a tool.</p>';
                document.title = 'No Tool Specified - Muntitool';
            }
        });
    </script>
</body>
</html>
